#expected-to-throw
query TestQuery @exec_time_resolvers {
  me {
    ...UserFragment
    ...OtherUserFragment
  }
}

fragment UserFragment on User {
  name
  ...SharedFragment
}

fragment OtherUserFragment on User {
  id
  ...SharedFragment  # This fragment is used twice
}

fragment SharedFragment on User {
  best_friend @waterfall {
    name
  }
}

fragment BestFriendResolverFragment_name on User {
  __typename
}

# %extensions%

extend type User {
  best_friend: User @relay_resolver(fragment_name: "BestFriendResolverFragment_name", import_path: "BestFriendResolver")
}
